# Appendix C. Hex-Prefix Encoding[^1]




　Hex-prefixエンコーディングは、任意の数のニブル（4bit:0x0 - 0xf）をバイト配列としてエンコーディングする効率的な方法です。これは、トライ木(Trie:Merkle-patricia treeをTrieと呼んでいる。詳細はAppendix-Dを参照)についての文脈で使用されるとき、ノードの種類の曖昧さをなくす追加のフラグを保持することができます。このエンコーディング方式は、ブール値と共にニブル文字列が（集合Yで表される）バイトの列（集合Bで表される）にマップされる関数HPとして定義されます。

![](https://i.imgur.com/NhvYtET.png)



したがって、最初の1バイトの上位ニブル(0x10の場合は1,0x20の場合は2)は2つのフラグを含みます。 長さの偶数木・奇数かどうかを符号化する最下位ビットと、フラグtを符号化する第2の最低符号とを含む。 第1のバイトの下位ニブルは、ニブルxの長さが偶数の場合にはゼロであり、奇数の場合には第1番目のニブルである。 残りのすべてのニブル（残りは偶数）が残りのバイトに正しく収まります。


[^1]: ethereumのwikiに該当項目は見当たらないが、参考になる解説ページはこちら https://bacoor-vietnam.co/ja/blog/2018/01/10/data-structure-in-ethereum-episode-1-compact-hex-prefix-encoding/